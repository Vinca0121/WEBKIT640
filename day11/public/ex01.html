<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form id="inputForm" action="/people/input" method="post" enctype="multipart/form-data">
        사용자 : <input type="text" name="user">
        이메일 : <input type="email" name="email">
        번 호 : <input type="number" name="phone">
        <br/><p></p>
        사진 선택 : <input type="file" multiple="true" name="photo_file" id="photo_file" accept="images/gif, image/jpeg, image/png"><br/>
        <p></p>
        <input type="submit" value="전송">
    </form>
    <div id="preview">사진 미리보기</div>


    <script>
        var inputForm = document.querySelector("#inputForm");
        var preview = document.querySelector("#preview");
        var photo_file = document.querySelector("#photo_file");

        photo_file.addEventListener("change", (event)=>{
            let input = event.target;
            console.dir(input);
            let filereader2 = new FileReader();
                console.log(filereader2)
            if(input.files && input.files[0])
            {
                
                // 비동기로 수행되는 부분
                let filereader = new FileReader();
                console.log(filereader)

                // 리스너를 추가
                filereader.addEventListener("load", (e)=>{
                    console.log("파일 일금")
                    //console.log(e.target.result);
                    let readImg = e.target.result;
                    preview.innerHTML = `<img src="${readImg}" width="200"/>`;
                    
                })
                // 실제 읽는 부분
                filereader.readAsDataURL(input.files[0]);                
            }
            //

        });
    </script>

</body>
</html>